@model Improvar.Models.Permission
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    <link rel="shortcut icon" type="image/x-icon" href="~/favicon.ico">
    <link rel="icon" href="~/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="~/Content/layout_misc.css?Ver=@Module.ContentVersion" type="text/css" />
    <link rel="stylesheet" href="~/Content/GridView.css" type="text/css" />
    <link rel="stylesheet" href="~/Content/font-awesome.min.css" />
    <link rel="stylesheet" href="~/Content/datatables.min.css" />
    <script src="~/Scripts/jquery-3.3.1.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="~/Content/jquery.stickytable.css" />
    <script src="~/Scripts/datatables.min.js"></script>
    <script src="~/Scripts/globalize.js"></script>
    <script src="~/Scripts/Globalization.culture.js"></script>
    <link rel="stylesheet" href="~/Content/bootstrap-select.css" />
   
    @Scripts.Render("~/Scripts/Multiple-Select-min.js?n=1")
    @Scripts.Render("~/Scripts/bootstrap-select.js?n=1")
    @Styles.Render("~/Content/bootstrap.css?Ver=" + Module.ContentVersion)
    @Styles.Render("~/Content/MyStyle.css?Ver=" + Module.ContentVersion)
    @Styles.Render("~/Content/themes/base/core.css")
    @Styles.Render("~/Content/themes/base/accordion.css")
    @Styles.Render("~/Content/themes/base/autocomplete.css")
    @Styles.Render("~/Content/themes/base/button.css")
    @Styles.Render("~/Content/themes/base/datepicker.css")
    @Styles.Render("~/Content/themes/base/dialog.css")
    @Styles.Render("~/Content/themes/base/draggable.css?n=1")
    @Styles.Render("~/Content/themes/base/menu.css")
    @Styles.Render("~/Content/themes/base/progressbar.css")
    @Styles.Render("~/Content/themes/base/resizable.css?n=1")
    @Styles.Render("~/Content/themes/base/selectable.css")
    @Styles.Render("~/Content/themes/base/selectmenu.css")
    @Styles.Render("~/Content/themes/base/sortable.css")
    @Styles.Render("~/Content/themes/base/slider.css?n=1")
    @Styles.Render("~/Content/themes/base/spinner.css?n=1")
    @Styles.Render("~/Content/themes/base/tabs.css")
    @Styles.Render("~/Content/themes/base/tooltip.css")
    @Styles.Render("~/Content/themes/base/theme.css?n=1")
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/Scripts/Custom.js?Ver=" + Module.ContentVersion)
    @Scripts.Render("~/Scripts/GridView.js?Ver=" + Module.ContentVersion)
    @{
        char SPLT = ((char)181);
    }
    @{
        Connection Cn = new Connection();
        int TotalCount = -1;
        int tmprng = 0;
        string path = "";
        int setind = 0;
        if (Model != null && Model.IndexKey != null)
        {
            if (Model.DefaultAction == "E" || Model.DefaultAction == "D" || Model.DefaultAction == "V")
            {
                TotalCount = Model.IndexKey.Count - 1;
            }
        }
        string MNUDET = "";
        string US = Model?.UNQSNO_ENCRYPTED;
        string doc_Code = "";
        string menu_para = "";
        if (!string.IsNullOrEmpty(Model.MENU_DETAILS))
        {
            MNUDET = Cn.Encrypt_URL(Model.MENU_DETAILS);
        }
        if (!string.IsNullOrEmpty(Model.DOC_CODE))
        {
            doc_Code = Cn.Encrypt_URL(Model.DOC_CODE);
        }
        if (!string.IsNullOrEmpty(Model.MENU_PARA))
        {
            menu_para = Cn.Encrypt_URL(Model.MENU_PARA);
        }
    }
    <script>
        function winclose(flag) {
            debugger;
            if (flag == 1) {
                $.ajax({
                    type: 'post',
                    url: "@Url.Action("UserActivity_CloseForm", "Home")",
                    data: {
                        MENU_DETAILS:'@Model.MENU_DETAILS',
                        UNQSNO:'@Model.UNQSNO'
                    },
                    success: function (result) {
                        window.close();
                    }, error: function (XMLHttpRequest, textStatus, errorThrown) {
                        window.close();
                    }
                });
            }
            else {
                if (confirm("Close Window?")) {
                    $.ajax({
                        type: 'post',
                        url: "@Url.Action("UserActivity_CloseForm", "Home")",
                        data: {
                            MENU_DETAILS:'@Model.MENU_DETAILS',
                            UNQSNO:'@Model.UNQSNO'
                        },
                        success: function (result) {
                            window.close();
                        }, error: function (XMLHttpRequest, textStatus, errorThrown) {
                            window.close();
                        }
                    });
                }
            }
        }
    </script>
    <script type="text/javascript">

        //Check by hk need to expand
        $(document).bind('keydown', function (e)
        {
            //save
            if (e.altKey && (e.which == 83)) {
                e.preventDefault();
                if('@Model'!='null'){
                    if ("@Model.DefaultAction" == "A"  ) {
                        pageValidation("A");
                    }
                    else if("@Model.DefaultAction" == "E"){
                        pageValidation("E");
                    }
                }
                return false;
            }
            //Delete
            if (e.altKey && (e.which == 68)) {
                e.preventDefault();
                var ss= $('#trash_nav').length;
                if('@Model'!='null'){
                    if ("@Model.DefaultAction" == "V" )
                    {
                        if(ss>0)
                        {
                            pageValidation('D');
                            return false;
                        }

                    }
                }
                return false;
            }
            if (e.altKey && (e.which == 78)) {
                //new
                if('@Model'!='null'){
                    @if (Model.Add == "A")
                    {
                        string url = Request.Url.AbsoluteUri;
                        path = Model.DefaultView == true ? url.Substring(0, url.IndexOf("?")) : url;
                        if (Model.DefaultAction == "V")
                        {
                            if (TotalCount >= 0)
                            {
                                tmprng = 1;
                            }

                        }
                    }
                }
                if(@tmprng==1){
                    e.preventDefault();
                    location.href="@path?op=A&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para";
                    e.preventDefault();
                    return false;
                }
                return false;
            }


            if (e.altKey && (e.which == 69)) {
                //edit
                if('@Model'!='null')
                {
                    var ss= $('#pencil_nav').length;
                    @if (Model.Edit == "E") {
                        string url = Request.Url.AbsoluteUri;
                        path = Model.DefaultView == true ? url.Substring(0, url.IndexOf("?")) : url;
                        setind = Model.Index + 1;
                        if (Model.DefaultAction == "V") {
                            if (TotalCount >= 0) {
                                tmprng = 1;
                            }
                        }
                    }
                }
                if(ss>0)
                {
                    if(@tmprng==1){
                        e.preventDefault();
                        location.href="@path?op=E&key=P&Nindex=@setind&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para";
                        e.preventDefault();
                        return false;
                    }
                }
            }
            //Print e.which = 80 // search Panel e.which = 70
            if (e.altKey && (e.which == 80)) {
                e.preventDefault();
                if('@Model'!='null')
                {
                    if ("@Model.DefaultAction" == "V"  ) return pageprinting();
                }
                return false;
            }
            //Search pannel
            if (e.altKey && (e.which == 70)) {
                e.preventDefault();
                if('@Model'!=null)
                {
                    if ("@Model.DefaultAction" == "V"  ) return searchPannelOpen();
                }
                return false;
            }
            //  Previous
            if (e.altKey && (e.which == 37)) {
                e.preventDefault();
                if('@Model'!=null)
                {
                    location.href="@path?op=V&key=P&Nindex=@Model.Index&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para";
                }
                return false;
            }
            // Next
            if (e.altKey && (e.which == 39)) {
                e.preventDefault();
                if('@Model'!=null)
                {
                    location.href="@path?op=V&key=N&Nindex=@Model.Index&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para";
                }
                return false;
            }
        });
    </script>
    <script>
        function ModifyLogDtl(mldauto) {
            var mdfyschem=$("#ModifyLogSchma").val();
            if ("@Model.DefaultAction" == "V") {
                $.ajax({
                    type: 'post',
                    url: '@Url.Action("ModifyLogDetail", "HOME")',
                    beforesend: $("#WaitingMode").show(),
                    data: { autono: mldauto,
                        schema:mdfyschem},
                    success: function (result) {
                        $("#WaitingMode").hide();
                        $('#ModifyLogModal').html(result);
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        $("#WaitingMode").hide();
                        alert("Status: " + textStatus); alert("Error: " + errorThrown);
                    }
                });
            }
        }
    </script>

    <script type="text/javascript">

    </script>
</head>


<body style="background-color:white" onunload="winclose(1)" onload="inputfocus();">
    @*Block f5 onkeydown="return (event.keyCode != 116)"*@
    <input type="hidden" id="useracticlosesave" value="@Url.Action("UserActivity_CloseForm", "Home")" />
    <input type="hidden" name="message_stay" id="message_stay" value="" />
    <input type="hidden" id="tempHDD" name="tempHDD" value="" />
    <input type="hidden" id="SearchFldValue" name="SearchFldValue" value="" />
    <input type="hidden" id="SearchValue" name="SearchValue" value="" />
    @Html.HiddenFor(model => model.AuthorisationAUTHCD)
    @Html.HiddenFor(model => model.AuthorisationLVL)
    @Html.HiddenFor(model => model.AuthorisationSLNO)
    <input type="hidden" id="parkrecords" value="@Url.Action("ParkRecord",Model.ControllerName)" />
    <input type="hidden" id="readparkrecords" value="@Url.Action("ReadParkRecord", "Home")" />
    <input type="hidden" id="delete_parkrecords" value="@Url.Action("DeleteParkRecord", "Home")" />
    <div id="WaitingMode" style="display:block; margin: 0px; padding: 0px; position: fixed; right: 0px; top: 0px; width: 100%; height: 100%; background-color: rgb(16, 134, 16); z-index: 30001; opacity: 0.4;">
        <p style="position: absolute; color: White; top: 46%; left: 47%;">
            Loading, please wait...<br />
            <span> <img src="~/Image/ajax_loader.gif" width="60px" height="60px"></span>
        </p>
    </div>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-target=".navbar-ex1-collapse" data-toggle="collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        @{
            path = Request.Url?.Scheme + Uri.SchemeDelimiter + Request.Url?.Host + ":" + Request.UrlReferrer?.Port.retStr() + Request.Url?.LocalPath;
        }
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                @if (Model.Add == "A")
                {
                    if (Model.DefaultAction == "A" || Model.DefaultAction == null)
                    {
                        @*<li class="menu-item">
                                <a href="#" title="Add New Mode"><span class="glyphicon glyphicon-plus" style="font-size:larger;color:darkgray"></span></a>
                            </li>*@
                        <li class="menu-item" id="ok_nav">
                            <a href="#" onclick="return pageValidation('A'); " class="anchor_handleCls"><span title="Save Record(Alt+S)" class="glyphicon glyphicon-ok" style="font-size:larger;color:white"></span></a>
                        </li>
                        if (Model.MENU_TYPE == "E")
                        {
                            <li class="menu-item" id="cart_nav">
                                <a href="#" onclick="return pageValidation('P','@Model.MENU_DETAILS','@Model.UNQSNO');" class="anchor_handleCls"><span title="Park Record" class="glyphicon glyphicon-shopping-cart" style="font-size:larger;color:#ffd800"></span></a>
                            </li>
                            if (Model.VisiblePark)
                            {
                                <li class="menu-item" id="unpark" style="display:block">
                                    <a href="#" onclick="return unparkRecords('@Model.MENU_DETAILS','@Model.UNQSNO');" class="anchor_handleCls"><span title="Unpark Record" class="glyphicon glyphicon-magnet" style="font-size:larger;color:#FFBABA"></span></a>
                                </li>
                            }
                            else
                            {
                                <li class="menu-item" id="unpark" style="display:none">
                                    <a href="#" onclick="return unparkRecords('@Model.MENU_DETAILS','@Model.UNQSNO');" class="anchor_handleCls"><span title="Unpark Record" class="glyphicon glyphicon-magnet" style="font-size:larger;color:#FFBABA"></span></a>
                                </li>
                            }
                        }
                    }
                    else if (Model.DefaultAction == "V")
                    {
                        <li class="menu-item" id="plus_nav">
                            <a href="@path?op=A&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para" title="Add New Mode(Alt+N)" class="anchor_handleCls"><span class="glyphicon glyphicon-plus" style="font-size:larger;color:white"></span></a>
                        </li>
                    }
                    else
                    {
                        if (Model.DefaultAction == "E" || Model.DefaultAction == "D")
                        {
                            <li class="menu-item" id="plus_nav">
                                <a href="#" title="Add New Record(Alt+N)" class="anchor_handleCls"><span class="glyphicon glyphicon-plus" style="font-size:larger;color:darkgray"></span></a>
                            </li>
                        }
                    }
                }
                @if (Model.Edit == "E")
                {
                    setind = Model.Index + 1;
                    if (Model.DefaultAction == "E" || Model.DefaultAction == null)
                    {
                        @*<li class="menu-item">
                                <a href="@path?op=E&key=P&Nindex=@setind" title="Edit Mode"><span class="glyphicon glyphicon-edit" style="font-size:larger;color:chartreuse"></span></a>
                            </li>*@
                        <li class="menu-item" id="ok_nav">
                            <a href="#" onclick="return pageValidation('E'); showLoader(this);" class="anchor_handleCls"><span title="Save Record(Alt+S)" class="glyphicon glyphicon-ok" style="font-size:larger;color:chartreuse"></span></a>
                        </li>
                    }
                    else if (Model.DefaultAction == "V")
                    {
                        if (TotalCount >= 0)
                        {
                            if (Model.MENU_TYPE == "E")
                            {
                                if (Model.CancelRecord == false)
                                {
                                    DateTime backdate = new DateTime(1999, 12, 12);
                                    if (Model.EditDay > 0)
                                    {
                                        backdate = System.DateTime.Now.AddDays(-Model.EditDay);
                                    }
                                    else
                                    {
                                        backdate = DateTime.ParseExact(Model.mindate, "dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture);
                                    }
                                    // DateTime backdate = System.DateTime.Now.AddDays(-Model.EditDay);
                                    DateTime docdt = (DateTime)Model.DOCDT;
                                    DateTime lockdate = (DateTime)Model.LOCKDT;
                                    if (lockdate.Date == new DateTime(1900, 12, 12))
                                    {
                                        if (docdt.Date >= backdate.Date || docdt.Date == DateTime.Now.Date)
                                        {
                                            if (Model.SearchValue == null)
                                            {
                                                <li class="menu-item" id="pencil_nav">
                                                    <a href="@path?op=E&key=P&Nindex=@setind&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para" title="Edit Mode(Alt+E)" class="anchor_handleCls"><span class="glyphicon glyphicon-pencil" style="font-size:larger;color:chartreuse"></span></a>
                                                </li>
                                            }
                                            else
                                            {
                                                setind = Model.Index;
                                                <li class="menu-item" id="pencil_nav">
                                                    <a href="@path?op=E&key=P&Nindex=@setind&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para&searchValue=@Model.SearchValue" title="Edit Mode)" class="anchor_handleCls"><span class="glyphicon glyphicon-pencil" style="font-size:larger;color:chartreuse"></span></a>
                                                </li>
                                            }
                                        }

                                    }
                                    else if (docdt.Date >= lockdate.Date)
                                    {

                                        if (Model.SearchValue == null)
                                        {
                                            <li class="menu-item" id="pencil_nav">
                                                <a href="@path?op=E&key=P&Nindex=@setind&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para" title="Edit Mode(Alt+E)" class="anchor_handleCls"><span class="glyphicon glyphicon-pencil" style="font-size:larger;color:chartreuse"></span></a>
                                            </li>
                                        }
                                        else
                                        {
                                            setind = Model.Index;
                                            <li class="menu-item" id="pencil_nav">
                                                <a href="@path?op=E&key=P&Nindex=@setind&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para&searchValue=@Model.SearchValue" title="Edit Mode)" class="anchor_handleCls"><span class="glyphicon glyphicon-pencil" style="font-size:larger;color:chartreuse"></span></a>
                                            </li>
                                        }
                                    }
                                }
                            }
                            else
                            {
                                if (Model.SearchValue == null)
                                {
                                    <li class="menu-item" id="pencil_nav">
                                        <a href="@path?op=E&key=P&Nindex=@setind&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para" title="Edit Mode(Alt+E)" class="anchor_handleCls"><span class="glyphicon glyphicon-pencil" style="font-size:larger;color:chartreuse"></span></a>
                                    </li>
                                }
                                else
                                {
                                    setind = Model.Index;
                                    <li class="menu-item" id="pencil_nav">
                                        <a href="@path?op=E&key=P&Nindex=@setind&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para&searchValue=@Model.SearchValue" title="Edit Mode)" class="anchor_handleCls"><span class="glyphicon glyphicon-pencil" style="font-size:larger;color:chartreuse"></span></a>
                                    </li>
                                }
                            }

                        }
                    }
                    else
                    {
                        if (Model.DefaultAction == "E" || Model.DefaultAction == "D" || Model.DefaultAction == "A")
                        {
                            <li class="menu-item" id="pencil_nav">
                                <a href="#"><span class="glyphicon glyphicon-pencil" title="Edit Mode(Alt+E)" style="font-size:larger;color:darkgray"></span></a>
                            </li>
                        }
                    }
                }
                @if (Model.Delete == "D")
                {
                    setind = Model.Index + 1;
                    if (Model.DefaultAction == "V")
                    {
                        if (TotalCount >= 0)
                        {

                            if (Model.MENU_TYPE == "E")
                            {
                                DateTime backdate = new DateTime(1999, 12, 12);
                                if (Model.DeleteDay > 0)
                                {
                                    backdate = System.DateTime.Now.AddDays(-Model.DeleteDay);
                                }
                                else
                                {
                                    backdate = DateTime.ParseExact(Model.mindate, "dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture);
                                }
                                //    DateTime backdate = System.DateTime.Now.AddDays(-Model.DeleteDay);
                                DateTime docdt = System.DateTime.Now;
                                if (Model.DOCDT != null)
                                {
                                    docdt = Model.DOCDT.Value;
                                }
                                DateTime lockdate = (DateTime)Model.LOCKDT;
                                if (lockdate.Date == new DateTime(1900, 12, 12))
                                {
                                    if (docdt.Date >= backdate.Date || docdt.Date == DateTime.Now.Date)
                                    {
                                        <li class="menu-item" id="trash_nav">
                                            <a href="#" onclick="return pageValidation('D');" title="Delete Mode(Alt+D)" class="anchor_handleCls"><span class="glyphicon glyphicon-trash" style="font-size:larger;color:red"></span></a>
                                        </li>
                                        if (Model.CancelRecord == true)
                                        {
                                            <li class="menu-item" id="floppy_remove_nav">
                                                <a href="#" title="UnCancel Record" onclick="return entryundoCancelation();showLoder(this);"><span class="glyphicon glyphicon-floppy-remove" style="font-size:larger;color:#ffd800"></span></a>
                                            </li>
                                        }
                                        else
                                        {

                                            <li class="menu-item" id="floppy_remove_nav">
                                                <a href="#" title="Cancel Record" onclick="return entryCancelation();showLoder(this);"><span class="glyphicon glyphicon-floppy-remove" style="font-size:larger;color:#fa0808"></span></a>
                                            </li>
                                        }
                                    }
                                }
                                else if (docdt.Date >= lockdate.Date)
                                {
                                    <li class="menu-item" id="trash_nav">
                                        <a href="#" onclick="return pageValidation('D');" title="Delete Mode(Alt+D)" class="anchor_handleCls"><span class="glyphicon glyphicon-trash" style="font-size:larger;color:red"></span></a>
                                    </li>
                                    if (Model.CancelRecord == true)
                                    {
                                        <li class="menu-item" id="floppy_remove_nav">
                                            <a href="#" title="UnCancel Record" onclick="return entryundoCancelation();showLoder(this);"><span class="glyphicon glyphicon-floppy-remove" style="font-size:larger;color:#ffd800"></span></a>
                                        </li>
                                    }
                                    else
                                    {

                                        <li class="menu-item" id="floppy_remove_nav">
                                            <a href="#" title="Cancel Record" onclick="return entryCancelation();showLoder(this);"><span class="glyphicon glyphicon-floppy-remove" style="font-size:larger;color:#fa0808"></span></a>
                                        </li>
                                    }
                                }
                            }
                            else
                            {
                                <li class="menu-item" id="trash_nav">
                                    <a href="#" onclick="return pageValidation('D');" title="Delete Mode(Alt+D)" class="anchor_handleCls"><span class="glyphicon glyphicon-trash" style="font-size:larger;color:red"></span></a>
                                </li>
                            }
                        }
                    }
                    else
                    {
                        if (Model.DefaultAction == "E" || Model.DefaultAction == "A")
                        {
                            <li class="menu-item" id="trash_nav">
                                <a href="#" class="anchor_handleCls"><span class="glyphicon glyphicon-trash" title="Delete Mode(Alt+D)" style="font-size:larger;color:darkgray"></span></a>
                            </li>
                        }
                    }
                }
                @if (Model.View == "V")
                {
                    setind = Model.Index + 1;
                    if (Model.DefaultAction == null || Model.DefaultAction == "V")
                    {
                        if (TotalCount >= 0)
                        {
                            <li class="menu-item" id="print_nav">
                                <a href="#" title="Print Record(Alt+P)" onclick="return pageprinting();"><span class="glyphicon glyphicon-print" style="font-size:larger;color:darkorange"></span></a>
                            </li>
                        }
                    }
                    else
                    {
                    }
                }
                @if (Model.Check == "C")
                {
                    setind = Model.Index + 1;
                    if (Model.DefaultAction == "V")
                    {
                        if (TotalCount >= 0)
                        {
                            if (Model.MENU_TYPE == "E")
                            {
                                DateTime backdate = new DateTime(1999, 12, 12);
                                if (Model.DeleteDay > 0)
                                {
                                    backdate = System.DateTime.Now.AddDays(-Model.DeleteDay);
                                }
                                else
                                {
                                    backdate = DateTime.ParseExact(Model.mindate, "dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture);
                                }
                                DateTime docdt = System.DateTime.Now;
                                if (Model.DOCDT != null)
                                {
                                    docdt = Model.DOCDT.Value;
                                }
                                DateTime lockdate = (DateTime)Model.LOCKDT;
                                if (lockdate.Date == new DateTime(1900, 12, 12))
                                {
                                    if (docdt.Date >= backdate.Date || docdt.Date >= lockdate.Date || docdt.Date == DateTime.Now.Date)
                                    {
                                        if (Model.IsChecked == true)
                                        {
                                            <li class="menu-item" id="check_nav">
                                                <a href="#" title="Uncheck Record" onclick="return OpenCheckRemarks();showLoder(this);"><span class="glyphicon glyphicon-check" style="font-size:larger;color:greenyellow"></span></a>
                                            </li>
                                        }
                                        else
                                        {
                                            <li class="menu-item" id="check_nav">
                                                <a href="#" title="check Record" onclick="return OpenCheckRemarks();showLoder(this);"><span class="glyphicon glyphicon-check" style="font-size:larger;color:goldenrod"></span></a>
                                            </li>
                                        }
                                    }
                                }
                                else if (docdt.Date >= lockdate.Date)
                                {
                                    if (Model.IsChecked == true)
                                    {
                                        <li class="menu-item" id="check_nav">
                                            <a href="#" title="Uncheck Record" onclick="return OpenCheckRemarks();showLoder(this);"><span class="glyphicon glyphicon-check" style="font-size:larger;color:greenyellow"></span></a>
                                        </li>
                                    }
                                    else
                                    {
                                        <li class="menu-item" id="check_nav">
                                            <a href="#" title="check Record" onclick="return OpenCheckRemarks();showLoder(this);"><span class="glyphicon glyphicon-check" style="font-size:larger;color:goldenrod"></span></a>
                                        </li>
                                    }
                                }
                            }
                        }
                    }
                    else
                    {
                        if (Model.DefaultAction == "E" || Model.DefaultAction == "A")
                        {
                            <li class="menu-item" id="trash_nav">
                                <a href="#" title="Check Record" class="anchor_handleCls"><span class="glyphicon glyphicon-check" style="font-size:larger;color:darkgray"></span></a>
                            </li>
                        }
                    }
                }
                @if (Model.ExitMode == 1)
                {
                    if (Model.DefaultAction != "V")
                    {
                        if (TotalCount >= 0)
                        {
                            setind = Model.Index + 1;
                            if (Model.SearchValue == null)
                            {
                                <li class="menu-item" id="remove_nav">
                                    <a href="@path?op=V&key=P&Nindex=@setind&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para" title="Revert(Alt+C)" accesskey="C"><span class="glyphicon glyphicon-remove" style="font-size:larger;color:#fc83f3"></span></a>
                                </li>
                            }
                            else
                            {
                                setind = Model.Index;
                                <li class="menu-item" id="remove_nav">
                                    <a href="@path?op=V&key=P&Nindex=@setind&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para&searchValue=@Model.SearchValue" title="Revert(Alt+C)" accesskey="C"><span class="glyphicon glyphicon-remove" style="font-size:larger;color:#fc83f3"></span></a>
                                </li>
                            }
                            if (Model.View == "V")
                            {
                                <li class="menu-item" id="print_nav">
                                    <a href="#" title="Print Record(Alt+P)"><span class="glyphicon glyphicon-print" style="font-size:larger;color:darkgray"></span></a>
                                </li>
                                <li class="menu-item">
                                    <a href="#" title="First Record" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-step-backward" style="font-size:larger;color:darkgray"></span></a>
                                </li>
                                <li class="menu-item">
                                    <a href="#" title="Previous Record" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-arrow-left" style="font-size:larger;color:darkgray"></span></a>
                                </li>
                                <li class="menu-item">
                                    <a href="#" title="Next Record" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-arrow-right" style="font-size:larger;color:darkgrey"></span></a>
                                </li>
                                <li class="menu-item">
                                    <a href="#" title="Last Record" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-step-forward" style="font-size:larger;color:darkgrey"></span></a>
                                </li>
                                if (Model.Check == "C")
                                {
                                    <li class="menu-item">
                                        <a href="#" title="Check Record"><span class="glyphicon glyphicon-check" style="font-size:larger;color:darkgrey"></span></a>
                                    </li>
                                }
                                <li class="menu-item">
                                    <a href="#" title="Filter"><span class="glyphicon glyphicon-filter" style="font-size:larger;color:darkgrey"></span></a>
                                </li>
                                <li class="menu-item">
                                    <a href="#" title="Audit Trail"><span class="glyphicon glyphicon-eye-open" style="font-size:larger;color:darkgrey"></span></a>
                                </li>
                                <li class="menu-item">
                                    <a href="#" title="Search(Alt+F)"><span class="glyphicon glyphicon-search" style="font-size:larger;color:darkgrey"></span></a>
                                </li>
                            }
                        }
                        else
                        {
                            if (Model.SearchValue == null)
                            {
                                <li class="menu-item" id="remove_nav">
                                    <a href="@path?op=V&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para" title="Revert(Alt+C)" accesskey="C"><span class="glyphicon glyphicon-remove" style="font-size:larger;color:#fc83f3"></span></a>
                                </li>
                            }
                            else
                            {
                                <li class="menu-item" id="remove_nav">
                                    <a href="@path?op=V&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para&searchValue=@Model.SearchValue" title="Revert(Alt+C)" accesskey="C"><span class="glyphicon glyphicon-remove" style="font-size:larger;color:#fc83f3"></span></a>
                                </li>
                            }
                        }
                    }
                }
            </ul>
            <ul class="nav navbar-nav">
                @if (Model.View == "V")
                {
                    if (Model.DefaultAction == "E" || Model.DefaultAction == "D" || Model.DefaultAction == "V" || Model.DefaultAction == null)
                    {
                        if (Model.ExitMode == 1)
                        {
                            if (Model.DefaultAction == "V")
                            {
                                if (Model.Searchpannel_State == true)
                                {//Auto search apannel comes in
                                }
                                if (TotalCount >= 0)
                                {
                                    if (Model.MENU_TYPE == "E")
                                    {
                                        if (Model.AuthorisationAUTHCD.retStr() != "")
                                        {
                                            if (Model.AuthorisationStatus == "A")
                                            {
                                            <li class="menu-item" id="authorised_nav">
                                                <a href="#" title="Click for Unauthorised Record" onclick="return OpenAuthoriseRemarks();showLoder(this);"><span class="glyphicon glyphicon-thumbs-up" style="font-size:larger;color:greenyellow;"></span></a>
                                            </li>
                                            }
                                            else if (Model.AuthorisationStatus == "N")
                                            {
                                            <li class="menu-item" id="authorised_nav">
                                                <a href="#" title="Click for Authorised Record" onclick="return OpenAuthoriseRemarks();showLoder(this);"><span class="glyphicon glyphicon-thumbs-down" style="font-size:larger;color:mediumvioletred;"></span></a>
                                            </li>
                                            }
                                            else
                                            {
                                            <li class="menu-item" id="authorised_nav">
                                                <a href="#" title="Click for Authorised Record" onclick="return OpenAuthoriseRemarks();showLoder(this);"><span class="glyphicon glyphicon-thumbs-up" style="font-size:larger;color:lightskyblue;"></span></a>
                                            </li>
                                            }
                                        }
                                        else
                                        {
                                            if (Model.AuthorisationStatus == "A")
                                            {
                                            <li class="menu-item" id="authorised_nav">
                                                <a href="#" title="Authorised Record"><span class="glyphicon glyphicon-thumbs-up" style="font-size:larger;color:greenyellow;"></span></a>
                                            </li>
                                            }
                                            else if (Model.AuthorisationStatus == "N")
                                            {
                                            <li class="menu-item" id="authorised_nav">
                                                <a href="#" title="Rejected Record"><span class="glyphicon glyphicon-thumbs-down" style="font-size:larger;color:mediumvioletred;"></span></a>
                                            </li>
                                            }
                                        }
                                    }
                                    if (Model.Index == 0)
                                    {
                                        <li class="menu-item">
                                            <a href="#" title="First Record" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-step-backward" style="font-size:larger;color:darkgray"></span></a>
                                        </li>
                                        <li class="menu-item">
                                            <a href="#" title="Previous Record" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-arrow-left" style="font-size:larger;color:darkgray"></span></a>
                                        </li>
                                    }
                                    else
                                    {
                                        <li class="menu-item">
                                            <a href="@path?op=V&key=F&Nindex=@Model.Index&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para" title="First Record" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-step-backward" style="font-size:larger;color:cyan"></span></a>
                                        </li>
                                        <li class="menu-item">
                                            <a href="@path?op=V&key=P&Nindex=@Model.Index&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para" title="Previous Record(Alt + ←)" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-arrow-left" style="font-size:larger;color:cyan"></span></a>
                                        </li>
                                    }
                                    if (TotalCount == Model.Index)
                                    {
                                        <li class="menu-item">
                                            <a href="#" title="Next Record" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-arrow-right" style="font-size:larger;color:darkgrey"></span></a>
                                        </li>
                                        <li class="menu-item">
                                            <a href="#" title="Last Record" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-step-forward" style="font-size:larger;color:darkgrey"></span></a>
                                        </li>
                                    }
                                    else
                                    {
                                        <li class="menu-item">
                                            <a href="@path?op=V&key=N&Nindex=@Model.Index&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para" title="Next Record (Alt + →)" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-arrow-right" style="font-size:larger;color:cyan"></span></a>
                                        </li>
                                        <li class="menu-item">
                                            <a href="@path?op=V&key=L&Nindex=@Model.Index&US=@US&MNUDET=@MNUDET&DC=@doc_Code&MP=@menu_para" title="Last Record" class="anchor_handleCls" onclick="showLoader(this)"><span class="glyphicon glyphicon-step-forward" style="font-size:larger;color:cyan"></span></a>
                                        </li>
                                    }

                                    <li class="menu-item" style="display:none;">
                                        <a href="#" title="Filter"><span class="glyphicon glyphicon-filter" style="font-size:larger;color:#ffd800"></span></a>
                                    </li>
                                    if (Model.Audit_nav)
                                    {
                                        <li class="menu-item" id="user_nav">
                                            <a href="#" title="Audit Trail"><span class="glyphicon glyphicon-user" style="font-size:larger;color:chartreuse" onclick="ModifyLogDetails()" data-toggle="modal" data-target="#ModifyLogModal"></span></a>
                                        </li>
                                    }
                                    if (Model.Search_nav)
                                    {
                                        <li class="menu-item" id="search_nav">
                                            <a href="#" title="Search Record(Alt+F)"><span class="glyphicon glyphicon-search" style="font-size:larger;color:orange" onclick="searchPannelOpen()"></span></a>
                                        </li>
                                    }
                                }
                            }
                        }
                    }
                }
            </ul>
            <ul class="nav navbar-nav navbar-right">
                @if (Model.DefaultAction == "A")
                {
                    <li style="margin-top:10px;margin-right:5px">
                        <span class="navbar-brand" style="font-family:Verdana;font-size:12px;color:#EEE"><span>Auto Add</span> <input type="checkbox" style="margin-top:0px;" name="ADDCONTROL" id="ADDCONTROL" /> </span>
                    </li>
                }
                <li style="margin-top:10px;margin-right:5px">
                    <span class="navbar-brand" style="font-family:Verdana;font-size:12px;color:#EEE">Welcome  @Session["UR_ID"]</span>
                </li>
                <li style="margin-top:10px;margin-right:5px">
                    <span class="navbar-brand" style="font-family:Verdana;font-size:12px;color:#EEE">|</span>
                </li>
                <li style="margin-top:10px;margin-right:15px">
                    <span class="navbar-brand" style="font-family:Verdana;font-size:12px;color:#D8000C;cursor:pointer;" title="Close window" onclick="winclose(0);">Close</span>
                </li>
                <li class="menu-item">
                    <img style="margin-top:2px;margin-right:15px;margin-left:15px;height:35px;" src="~/Image/IPSMART-LOGO.png" />
                </li>
            </ul>
        </div>
    </div>
    <div class="container_box_outer">
        <div class="body-content container_box">
            @*required border*@
            <div style="background-color: rgb(111, 163, 208);    height: 23px;  padding-left: 15px; vertical-align: middle;    font-size: medium; font-weight:bold;  color: #FFFFFF;">
                @ViewBag.formname
            </div>
            <div class="container_box_inner">
                @RenderBody()
            </div>
            <div class="modal fade" id="ModifyLogModal" role="dialog">
                @*@Html.Partial("_ModifyLog")*@
            </div>
            <div class="modal fade" id="ZoomTextBoxModal" role="dialog">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Zoom Text</h4>
                        </div>
                        <div class="modal-body">
                            <textarea class="form-control" id="txtZoomTextBoxModal" rows="5"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-success" data-dismiss="modal" onclick="CloseZoomTextBoxModal()">Save changes</button>
                        </div>
                    </div>
                </div>
                <script>
                    $('#ZoomTextBoxModal').on('shown.bs.modal', function () {
                        $('#txtZoomTextBoxModal').focus();
                    });
                </script>
            </div>
        </div>
    </div>
    <div class="bottomDiv">
        <div class="abc sec1">
            @Session["CompanyName" + Model.UNQSNO]
        </div>
        <div class="abc sec2">
            @Session["CompanyLocation" + Model.UNQSNO]
        </div>
        <div class="abc sec3">
            Period- @Session["CompanyFinancial" + Model.UNQSNO]
        </div>
        <div class="abc sec3_1">
            @{
                string hh1 = "IPSMART " + Module.Module_Name + " - Version" + @Session["publishversion"];
            }
            @hh1
        </div>
        <div class="abc sec4">
            Developed by IPSMART Team
        </div>
    </div>
    <div id="CAN_overlay">
        <div id="CAN_text">
            @if (Model.CancelRecord == true)
            {
                <div style="padding:5px;" id="UndoCancel" align="center">
                    <p><strong>Are you sure to un cancelled this record?</strong></p>
                    <input type="button" class="btn btn-success" value="Yes" onclick="CAN_UNDO_Record();" />
                    <input type="button" class="btn btn-info" value="Undo" onclick="CAN_Remark_undo();" />
                    <script type="text/javascript">
                        document.body.style.background="#FFCCCC";
                    </script>
                </div>
            }
            else
            {
                <script type="text/javascript">
                    document.body.style.background="white";
                </script>
                <div style="padding:5px">
                    <input type="search" autofocus id="CAN_Remarks" maxlength="100" style="height:50px" placeholder="Remarks for Cancelation..." class="form-control" />
                    <p><strong>Note:</strong>Remarks should be proper for cancel the current record</p>
                    <input type="button" class="btn btn-success" value="OK" onclick="CAN_record_save('Uncheck');" />
                    <input type="button" class="btn btn-info" value="Close" onclick="CAN_Remark_close();" />
                </div>
            }
        </div>
    </div>
    <div id="CHK_overlay">
        <div id="CHK_text">
            @if (Model.IsChecked == true)
            {
                <div style="padding:5px;" id="UndoCheck" align="center">
                    <input type="hidden" id="CHK_Remarks" />
                    <p><strong>Are you sure to Unchecked this record?</strong></p>
                    <input type="button" class="btn btn-success" value="Yes" onclick="SaveCheckAuthorisation('UnCheck');" />
                    <input type="button" class="btn btn-info" value="Close" onclick="CHK_Remark_close();" />
                    <script type="text/javascript">
                        document.body.style.background="#dfefdf";
                    </script>
                </div>
            }
            else
            {
                <div style="padding:5px">
                    <input type="search" id="CHK_Remarks" maxlength="100" style="height:50px" placeholder="Remarks for Cancelation..." class="form-control" />
                    <p><strong>Note:</strong>Remarks should be proper for Check the current record</p>
                    <input type="button" class="btn btn-success" value="OK" onclick="SaveCheckAuthorisation('Check');" />
                    <input type="button" class="btn btn-info" value="Close" onclick="CHK_Remark_close();" />
                </div>
            }
        </div>
    </div>
    <div id="Authorise_overlay">
        <div id="Authorise_text">
            <div style="padding:5px;" align="center">
                <input type="search" id="Authorise_Remarks" maxlength="100" style="height:50px" placeholder="Remarks" class="form-control" />
                @if (Model.AuthorisationStatus == "A")
                {
                    <p><strong id="AuthoriseCaption">Are you sure to Unauthorise this record?</strong></p>
                    <input type="button" class="btn btn-danger" value="REJECT" onclick="SaveCheckAuthorisation('Unauthorise');" />
                    <script type="text/javascript">
                        document.body.style.background="#c6e3c6";
                    </script>
                }
                else if (Model.AuthorisationStatus == "N")
                {
                    <p><strong id="AuthoriseCaption">Are you sure to Unauthorise this record?</strong></p>
                    <input type="button" class="btn btn-success" value="AUTHORISE" onclick="SaveCheckAuthorisation('Authorise');" />
                }
                else
                {
                    <p><strong id="AuthoriseCaption">Add Remarks </strong></p>
                    <input type="button" class="btn btn-success" value="AUTHORISE" onclick="SaveCheckAuthorisation('Authorise');" />
                    <input type="button" class="btn btn-danger" value="REJECT" onclick="SaveCheckAuthorisation('Unauthorise');" />
                }
                <input type="button" class="btn btn-info" value="Close" onclick="CHK_Remark_close();" />
            </div>
        </div>
    </div>
    <div id="Msgdiv1" style="display:none">
        <div id="back_cover">
            @Html.Partial("_MessageBox")
        </div>
    </div>
    <script>
        function HideConfirmOk() {
            $('#Msgdiv1').hide();
            $('#confirm').hide();
            deletePageData();
            return false;
        }
        function HideConfirmCancel() {
            $('#Msgdiv1').hide();
            $('#confirm').hide();
            return false;
        }
        function delete1() {
            function ok() {
                console.log('deleted');
                HideConfirmOk();
            }
            function cancel() {
                console.log('delete cancelled');
                HideConfirmCancel();
            }
            ConfirmInDiv('Are you sure to delete?', ok, cancel);
        }
    </script>
    @Scripts.Render("~/bundles/bootstrap?Ver=" + Module.ContentVersion)
    @Scripts.Render("~/Scripts/datatables.js?Ver=" + Module.ContentVersion)
    @Scripts.Render("~/bundles/jqueryui")
    <script src="~/Scripts/jquery.mobile-events.js"></script>
    <script>
        $(function () {
            $(".jqueryui-marker-datepicker").datepicker({
                dateFormat: "dd/mm/yy",
                changeYear: true,
                showOn: "@Model.button",
                maxDate: '@Model.maxdate',
                minDate: '@Model.mindate'
            }).css("display", "inline-block")
            .next("button").button({
                icons: { primary: "ui-icon-calendar" },
                label: "Select date",
                text: false
            });
        });
    </script>
    @RenderSection("scripts", required: false)
</body>
</html>
